# SQL Tutorial



[TOC]

## 01 데이터베이스와 SQL

### 데이터베이스

여러 응용 프로그램을 통해서 엑세스 가능한 공유된 형태의 통합된 데이터의 집합

#### 특징

- 데이터의 독립성
- 데이터의 무결성
- 데이터의 보안성
- 데이터의 일관성
- 데이터의 중복 최소화

#### 구조 종류

- 파일 시스템
- 데이터베이스 관리 시스템(Database Management System)
  - 계층형 데이터베이스 시스템
  - 망형 데이터베이스 시스템
  - 관계형 데이터베이스 시스템(RDBMS)
  - 키-밸류 스토어(KVS)

#### 데이터베이스 제품

- Oracle, DB2, PostgreSQL, MySQL, SQLite, ...

#### 데이터베이스 서버

- 클라이언트/서버 모델: 사용자 조작에 따라 요청을 전달하는 '클라이언트'와 해당 요청을 받아 처리하는 '서버'로 구성되는 모델
- MySQL
  - client(mysql): `mysql -u root -p` 명령어를 사용하여 사용자 인증 후 접속
  - client UI(mysql workbench)
  - server(mysqld) = RDBMS



### SQL 명령

- **DML**(Data Manipulation Language): 데이터를 조작하는 명령어. 데이터를 추가, 삭제, 갱신하는 등 데이터를 조작할 때 사용.
- **DDL**(Data Definition Language): 데이터를 정의하는 명령어. 데이터베이스 객체를 만들거나 삭제할 때 사용.
- **DCL**(Data Control Language): 데이터를 제어하는 명령어. 트랜잭션 제어, 데이터 접근권한 제어할 때 사용.






## 02 테이블에서 데이터 검색


> 예약어와 객체명은 대소문자를 구별하지 않는다. 하지만 많은 데이터베이스 제품들은 데이터의 대소문자를 구별한다.
>
> 본 문서에서는 예약어는 대문자로, 데이터베이스 객체명은 소문자로 표기한다.

### SELECT

데이터베이스의 데이터를 읽어온다. '질의'나 '쿼리(Query)'라고도 불린다.


```sql
SELECT *
FROM table_name;
```


-   `SELECT`: DML(Data Manipulation Language)에 속하는 명령어
-   `*(asterisk)`: '모든 열'을 의미하는 메타문자
-   `FROM`: 처리 대상 테이블을 지정하는 키워드
-   `table_name`: 데이터베이스 객체인 테이블명
-   `;(semicolon)`: 명령문의 마지막에 붙인다.



### WHERE


```sql
SELECT column1_name, column2_name
FROM table_name
WHERE conditional_statement;
```


* `column_name`: SELECT 구를 통해 읽어오길 원하는 열을 지정할 수 있다. comma(,)를 사용해 여러 열을 지정할 수 있다.
* `WHERE`: WHERE 구를 통해 조건에 맞는 행을 지정할 수 있다.
* `conditional_statement`: 조건식은 '열과 연산자, 상수로 구성된 식'이다. 참 또는 거짓의 진리값을 반환한다.




### DESC(describe)


테이블 구조를 참조한다.


```sql
DESC table_name;
```


테이블은 다음과 같은 구조를 갖는다.


| Field  | Type   | Null     | Key  | Default | Extra |
| ------ | ------ | -------- | ---- | ------- | ----- |
| 필드명 | 자료형 | 제약사항 | 키   | 기본값  |       |




### 자료형

대표적인 자료형은 다음과 같다. 이 외에도 다양한 자료형이 존재한다.

수치형의 경우 그대로 표기하지만 문자형, 날짜형, 시간형의 경우 single quotes(' ')로 둘러싸 표기한다.


* **INTEGER**: 수치형의 하나로 정수값을 저장할 수 있다.
* **CHAR**: 문자형의 하나로 '고정 길이 문자열'을 저장할 수 있다. 열의 최대 길이를 지정해야 한다. 문자열의 길이가 최대 길이보다 작을 경우 공백문자로 나머지 길이를 채운다.
* **VARCHAR**: 문자형의 하나로 '가변 길이 문자열'을 저장할 수 있다. 마찬가지로 열의 최대 길이를 지정해야 한다.
* **DATE**: 날짜값(연월일)을 저장할 수 있다. 날짜형의 연-월-일은 hyphen(-)으로 구분한다.
* **TIME**: 시간(시분초)을 저장할 수 있다. 시간형의 시:분:초는 colon(:)으로 구분한다.



### NULL

값이 없는 데이터

검색 시 `=` 연산자 대신 `IS NULL` 을 사용한다.



### 연산자

- `=`: 값이 같은 경우 참

- `<>`: 값이 서로 다른 경우 참
- `>`: 좌변의 값이 우변의 값보다 클 경우 참 (ant. `<`)
- `>=`: 좌변의 값이 우변의 값보다 같거나 클 경우 참 (ant. `<=`)



### 조건 조합

- `AND`: 모든 조건을 만족하면 참
- `OR`: 어느 쪽이든 하나의 조건만 만족하면 참
- `NOT`: 오른쪽에 지정된 조건식의 반대값 반환



### LIKE

문자열의 일부분을 비교하는 패턴 매칭(부분 검색)

```sql
column_name LIKE 'pattern'
```

- `LIKE`: LIKE 술어의 왼쪽에는 매칭 대상을 지정하고 오른쪽에는 비교할 패턴을 문자열로 지정한다.
- `pattern`: 패턴을 정의할 때 다음과 같은 메타문자를 사용할 수 있다.
  - `%(percent)`: 임의의 문자열. 사용 위치에 따라 전방 일치, 중간 일치, 후방 일치로 검색이 가능하다.
  - `_(underscore)`: 임의의 문자 하나





## Refer.

-   SQL 첫걸음, 아사이 아츠시
-   빅데이터 교육